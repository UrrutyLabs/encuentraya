version: 1
applications:
  - appRoot: apps/client
    frontend:
    phases:
      preBuild:
        commands:
          - corepack enable
          - corepack prepare pnpm@latest --activate
          - cd ../..
          - pnpm install --frozen-lockfile
      build:
        commands:
          - pnpm turbo run build --filter=client
    artifacts:
      baseDirectory: apps/client/.next
      files:
        - "**/*"
    cache:
      paths:
        - node_modules/**/*
        - .turbo/**/*
